{"version":3,"sources":["../js/index.ts"],"names":[],"mappings":"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","file":"js.d744eb43.map","sourceRoot":"../pug","sourcesContent":["let gameData = <any>{\n\tselected: false,\n\ttowers: [[], [], []],\n\tactiveIndex: null,\n\tmoves: 0\n}\n\nfunction setupClickHandlers() {\n\tlet towers = document.querySelectorAll(\".tower\")\n\n\ttowers.forEach(tower => {\n\t\ttower.addEventListener(\"click\", handleClick)\n\t})\n\n\tlet startButton = document.getElementById(\"start-button\")\n\n\tstartButton.addEventListener(\"click\", (e: MouseEvent) => {\n\t\te.preventDefault()\n\n\t\tconst input = (<HTMLInputElement>document.getElementById(\"disc-count\"))\n\t\t\t.value\n\t\tconst discCount = parseInt(input, 10)\n\n\t\tif (discCount >= 3 && discCount <= 6) {\n\t\t\tgameData.discCount = discCount\n\t\t\tstartGame(discCount)\n\t\t}\n\t})\n}\n\nfunction validateMove(from: Array<HTMLElement>, to: Array<any>) {\n\tlet fromDisc = from[0]\n\n\tif (to.length > 0) {\n\t\t// validate size of discs\n\t\tif (to[0].dataset.size < fromDisc.dataset.size) {\n\t\t\treturn true\n\t\t} else {\n\t\t\t// no move allowed\n\t\t\treturn false\n\t\t}\n\t} else {\n\t\t// just move\n\t\treturn true\n\t}\n}\n\nfunction _deactivateTower() {\n\tconst activeTower = document.querySelector(\n\t\t`[data-index=\"${gameData.activeIndex}\"]`\n\t)\n\tactiveTower.classList.remove(\"active\")\n\tgameData.activeIndex = null\n}\n\nfunction _activateTower(index) {\n\tconst activeTower = document.querySelector(`[data-index=\"${index}\"]`)\n\tactiveTower.classList.add(\"active\")\n\tgameData.activeIndex = index\n}\n\nfunction handleClick(e: any) {\n\t// get current tower index\n\tlet currentIndex = e.currentTarget.dataset.index\n\n\t// if same index, deactivate\n\tif (gameData.activeIndex === currentIndex) {\n\t\t_deactivateTower()\n\t\treturn\n\t}\n\n\t// if null index, make current click\n\telse if (gameData.activeIndex === null) {\n\t\tgameData.activeIndex = currentIndex\n\t\t_activateTower(currentIndex)\n\t}\n\n\t// if active && different index, make move\n\telse {\n\t\tlet from = gameData.towers[gameData.activeIndex]\n\t\tlet to = gameData.towers[currentIndex]\n\n\t\t// validate sizes\n\t\tif (validateMove(from, to)) {\n\t\t\t// perform actual move in arrays\n\t\t\tlet disc = from.shift()\n\t\t\tgameData.towers[currentIndex].unshift(disc)\n\t\t\t_deactivateTower()\n\n\t\t\tgameData.moves += 1\n\t\t\t// trigger refresh dom\n\t\t\tsyncDiscsToDom()\n\t\t} else {\n\t\t\t_deactivateTower()\n\t\t}\n\t}\n\n\tif (validateWin()) {\n\t\tshowWinCondition()\n\t}\n}\n\n\nfunction showWinCondition() {\n\tlet winContainer = document.querySelector('.win-container')\n\tlet moves = document.getElementById('move-count')\n\n\twinContainer.classList.remove('hidden')\n\tmoves.innerHTML = gameData.moves\n}\n\nfunction showGame() {\n\tlet towerContainer = <HTMLElement>document.querySelector(\".tower-container\")\n\ttowerContainer.style.display = \"flex\"\n}\n\nfunction validateWin() {\n\tlet t3 = gameData.towers[2]\n\n\tif (t3.length > 0 && t3.length === gameData.discCount) {\n\t\treturn true\n\t}\n}\n\nfunction syncDiscsToDom() {\n\tlet towers = document.querySelectorAll(\".tower\")\n\n\tgameData.towers.forEach((discStack, si) => {\n\t\tlet discContainer = towers[si].querySelector(\".disc-container\")\n\t\tdiscContainer.innerHTML = \"\"\n\t\tdiscStack.forEach((s, i) => {\n\t\t\tdiscContainer.appendChild(s)\n\t\t})\n\t})\n}\n\nfunction hideIntro() {\n\tlet start = document.querySelector(\".start-form\")\n\tstart.classList.add(\"hidden\")\n}\n\nfunction makeInitialDiscs(qty: number) {\n\tconst discContainer = document.querySelector(\"#tower-1 .disc-container\")\n\n\tfor (let i = qty; i > 0; i--) {\n\t\tlet disc = document.createElement(\"div\")\n\t\tdisc.classList.add(\"disc\")\n\t\tdisc.setAttribute(\"data-size\", i.toString())\n\t\tdisc.id = `disc-${i}`\n\t\tdiscContainer.appendChild(disc)\n\t\tgameData.towers[0].push(disc)\n\t}\n}\n\nfunction startGame(discCount: number) {\n\tshowGame()\n\thideIntro()\n\tmakeInitialDiscs(discCount)\n}\n\nfunction init() {\n\tsetupClickHandlers()\n}\n\ninit()\n"]}